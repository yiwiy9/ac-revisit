# Requirements Document

## Project Description (Input)
ac-revisit は AtCoder 上で動作するユーザースクリプトである。 本ユーザースクリプトは Greasy Fork にアップロードして配布し、利用者は Tampermonkey にインストールして動作させる想定とする。 目的は、ユーザーが過去に解いた問題のうち「復習したい」と登録したものを、忘れた頃に1問ずつ提案することである。 ■ 前提（開発） - 実装は TypeScript で行う。 - ESLint を導入し、静的解析（lint）を実施できる。 - TypeScript の型チェック（tsc 等）をビルドとは独立して実施できる。 - このスクリプトはブラウザ内で完結し、外部APIや外部サーバーとは通信しない。 - データはブラウザ内に永続化される。 ■ 前提（ログイン要件） - 本スクリプトは AtCoder にログインしているユーザーのみ利用できる想定とする。 ■ 復習の基本ルール（MVPの単純化方針） - ユーザーは任意のAtCoder問題を「復習対象」として登録できる。 - 各問題は「登録日」だけを持つ（前回完了日などは持たない）。 - 問題が提案候補になる条件は「登録日から14日以上経過していること」とする。 - 復習間隔は固定14日であり、段階的増加やアルゴリズム的最適化は行わない。 - 「定着判定」は行わず、完了はユーザーの自己判断とする。 ■ 問題の登録・解除 - 問題ページおよび提出詳細ページに、登録・解除のためのトグルボタンを表示する。 - ボタン押下により、その問題を復習対象として登録／解除できる。 - 解除は復習対象から完全に削除する挙動とする。 ■ 1日の自動提案 - ユーザーがその日初めてAtCoderを開いたタイミングで、 提案候補の中からランダムに1問を選び、「今日の一問」として提示する。 - 自動通知（ポップアップ）は1日1回のみ表示する。 - 自動表示されるポップアップは、後述のメニュー押下時のポップアップと同一のUIを使用する。 ■ 常設導線（AtCoderヘッダー右端のユーザー名押下で開くハンバーガーメニュー内リンク） - 常設導線は、AtCoder ヘッダー右端のユーザー名押下で開くハンバーガーメニュー内に追加する。 - 提案候補が存在しない場合でも、このリンクは常に表示する（スクリプトがロードされていることを確認できるようにするため）。 - リンク押下でポップアップを表示する。 ■ 今日の一問の状態管理 - 状態は問題ごとではなく、「今日の一問が完了か未完了か」で管理する。 - 常に同時に扱う提案問題は1問のみとする。 ■ ポップアップに含める機能 1) 「今日の問題へ」リンク - 今日の提案問題が存在し、かつ今日の一問が未完了の場合のみ有効。 - それ以外はグレーアウト。 2) 「もう一問」フェッチボタン - 以下のすべてを満たす場合のみ押下可能とする： - 今日の一問が完了であること - 14日以上経過した提案候補が少なくとも1件存在すること - 今日の一問が未完了の場合は押下不可。 - 候補が存在しない場合も押下不可。 - 押下すると候補からランダムに1問選び、 新たな「今日の提案問題」として設定し、 「今日の一問」を未完了状態に戻す。 - 未完了の問題を差し替える用途ではない。 3) 「今日の一問を完了にする」ボタン - 今日の一問が未完了かつ提案問題が存在する場合のみ押下可能。 - 押下すると今日の一問を完了に遷移させる。 ■ 削除と完了の処理定義（単一トランザクション） 本MVPでは、問題は登録日しか持たない。 完了は「削除→再登録」によって実現する。 - 提案中の問題を解除した場合： - 復習リストから削除する - 今日の一問を完了にする - 上記は1つのトランザクションで行う - 「今日の一問を完了にする」ボタンを押した場合： - 上記の削除処理を実行 - その後、当該問題を新たな登録日（今日）で再登録する - これも1つのトランザクションで行う これにより、完了した問題は今日を登録日として再スタートし、 14日後以降に再び提案候補となる。 ■ MVPで実装しないもの - 自動AC検知 - 復習対象一覧画面 - デュー可視化 - メモ機能 - タグ機能 - ストリーク - 統計機能 - 動的間隔調整 ■ 設計思想 - 最小限 - 静か - 管理を強制しない - 1問ずつ提示 - 完了は自己判断 - 義務感を生まない

## Requirements
<!-- Will be generated in /kiro:spec-requirements phase -->
